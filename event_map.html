<!DOCTYPE html>
<html>
<head>
    <title>Event Map - Polished</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Leaflet CSS & JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    <!-- Fullscreen plugin -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.css" />
    <script src="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.js"></script>
    
    <!-- MarkerCluster plugin -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

    <style>
        #map { height: 600px; width: 100%; }
        .popup-image { max-width: 100px; height: auto; margin-bottom: 5px; }
        #legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            font-size: 13px;
            z-index: 1000;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <h1>Events in the World</h1>
    <div id="map"></div>
    <div id="legend">
        <b>Event Types</b><br>
        <img src="./MilitaryIcon.png" width="20" /> Military<br>
        <img src="./ProtestIcon.png" width="20" /> Protest<br>
        <img src="./TerrorismIcon.png" width="20" /> Terrorism<br>
        <img src="./DisasterIcon.png" width="20" /> Disaster/Accident<br>
        <img src="./NDIcon.png" width="20" /> Natural Disaster<br>
        <img src="./HumanitarianCrisisIcon.png" width="20" /> Humanitarian<br>
    </div>

    <script>
        var map = L.map('map', {
            fullscreenControl: true
        }).setView([20, 0], 2);

        L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        var markers = L.markerClusterGroup();

        function createIcon(url) {
            return L.icon({
                iconUrl: './' + url,
                iconSize: [40, 40],
                iconAnchor: [20, 20],
                popupAnchor: [0, -10]
            });
        }

        var icons = {
            "military": createIcon("MilitaryIcon.png"),
            "protest/unrest": createIcon("ProtestIcon.png"),
            "terrorism": createIcon("TerrorismIcon.png"),
            "disaster": createIcon("DisasterIcon.png"),
            "accident": createIcon("DisasterIcon.png"),
            "explosion": createIcon("ExplosionIcon.png"),
            "natural disaster": createIcon("NDIcon.png"),
            "humanitarian crisis": createIcon("HumanitarianCrisisIcon.png"),
            "piracy": createIcon("PiracyIcon.png"),
            "cyber crime": createIcon("CyberCrimeIcon.png"),
            "assassination": createIcon("AssassinationIcon.png"),
            "unknown": createIcon("UnknownIcon.png"),
            "violent": createIcon("UnknownIcon.png"),
            "news": createIcon("UnknownIcon.png"),
            "law enforcement": createIcon("Police.png")
        };

        // Placeholder: Add markers here, e.g.:
        // var marker = L.marker([lat, lng], {icon: icons["military"]}).bindPopup("Info...");
        // markers.addLayer(marker);

                var marker =  null;
    marker = L.marker([31.50161, 34.46672]).bindPopup( "<a href='https://www.euronews.com/2025/07/04/hamas-says-it-has-given-a-positive-response-to-the-latest-ceasefire-proposal-in-gaza' target='_blank'> <b>Hamas says it has given a &#39;positive&#39; response to the latest ceasefire proposal in Gaza</b></a><br> <img src='https://static.euronews.com/articles/stories/04/63/01/94/1200x675_cmsv2_c6a92aeb-53b9-5d78-a5d4-933b2961183c-4630194.jpg' class='popup-image' alt='Event Image'><br> Gaza (PSE)<br>...  Hamas says it has given a “positive” response to the latest proposal for a ceasefire in Gaza but said further talks were needed on implementation.<br><small>Published: 2025/7/4 20:32</small>" );
            markers.addLayer(marker);
            
               marker = L.marker([40.6301, -74.42737], {icon: icons["natural disaster"]}).bindPopup("<a href='https://www.nytimes.com/2025/07/04/nyregion/new-jersey-storm.html'  target='_blank'> <b>Brief but Violent Storms in New Jersey Leave 3 Dead</b></a><br>North Plainfield (USA) <br>death toll: 3<br> <img src='https://static01.nyt.com/images/2025/07/04/multimedia/04met-storm-NJ-lkpq/04met-storm-NJ-lkpq-facebookJumbo.jpg' class='popup-image' alt='Event Image'><br> <br> ...“We have to focus on the emergency at hand and support the impacted families and get normalcy restored as quickly as possible.”  Mr. Mapp identified the two male victims in Plainfield as Rocco Sansone&#44; 79&#44; of North Plainfield and Brian Ernesto Valladares&#44; 25&#44; of Plainfield. <br><small>Published: 2025/7/4 21:54</small>");
               markers.addLayer(marker);
               
               marker = L.marker([40.63371, -74.40737], {icon: icons["natural disaster"]}).bindPopup("<a href='https://www.nytimes.com/2025/07/04/nyregion/new-jersey-storm.html'  target='_blank'> <b>Brief but Violent Storms in New Jersey Leave 3 Dead</b></a><br>Plainfield (USA) <br>death toll: 3<br> <img src='https://static01.nyt.com/images/2025/07/04/multimedia/04met-storm-NJ-lkpq/04met-storm-NJ-lkpq-facebookJumbo.jpg' class='popup-image' alt='Event Image'><br> <br> ...“We have to focus on the emergency at hand and support the impacted families and get normalcy restored as quickly as possible.”  Mr. Mapp identified the two male victims in Plainfield as Rocco Sansone&#44; 79&#44; of North Plainfield and Brian Ernesto Valladares&#44; 25&#44; of Plainfield. <br><small>Published: 2025/7/4 21:54</small>");
               markers.addLayer(marker);
               
    map.addLayer(markers);
    </script>
</body>
</html>
